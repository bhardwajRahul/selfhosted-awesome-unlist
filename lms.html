<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Access your self-hosted music using a web interface."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/selfhosted-awesome-unlist/site.css" rel="stylesheet" type="text/css"></head></head><body><nav class="navigation"><section class="container"><a class="navigation-title" href="/selfhosted-awesome-unlist/">Selfhosted Awesome [Un]list</a><ul class="navigation-list float-right"><li class="navigation-item"><a class="navigation-link" href="https://github.com/leviwheatcroft/selfhosted-awesome-unlist"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>github</a></li></ul></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>lms</h1><span class="subheading"></span><div class="links"><a class="button button-outline" href="https://github.com/epoupon/lms"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>LMS</a><a class="button button-outline" href="http://lms.demo.poupon.io/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-box"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>Demo</a></div></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info"><div class="github"><span class="pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>27 Apr 2020</span><span class="stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>156</span><span class="issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>9</span></div><div class="tags"><a class="button" href="/selfhosted-awesome-unlist/tags/c.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>C++</a><a class="button" href="/selfhosted-awesome-unlist/tags/media-streaming.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>Media Streaming</a><a class="button" href="/selfhosted-awesome-unlist/tags/selfhosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>selfhosted</a><a class="button" href="/selfhosted-awesome-unlist/tags/docker.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>Docker</a></div></div></div></div></div></section><article><div class="container"><div class="row"><div class="column"><h1 id="lms---lightweight-music-server">LMS - Lightweight Music Server</h1>
<p><a href="https://travis-ci.org/epoupon/lms"><img src="https://travis-ci.org/epoupon/lms.svg?branch=master" alt="Build Status"></a> <img src="https://img.shields.io/github/v/release/epoupon/lms" alt="GitHub release (latest by date)"></p>
<p><em>LMS</em> is a self-hosted music streaming software: access your music collection from anywhere using a web interface!</p>
<p>A <a href="http://lms.demo.poupon.io">demo</a> instance is available, with the following limitations:</p>
<ul>
<li>Settings cannot be saved</li>
<li>No persistent playqueue</li>
<li>No administration panel</li>
</ul>
<h2 id="main-features">Main features</h2>
<ul>
<li>Low memory requirement (the demo instance runs on a Raspberry Pi3B+, using less than 10% of total memory even when transcoding)</li>
<li>User management</li>
<li>Recommendation engine</li>
<li>Audio transcode for maximum interoperability and low bandwith requirements</li>
<li>Persistent play queue across sessions</li>
<li>Compilation support</li>
<li>Multi-value tags: artists, genres, ...</li>
<li>Custom tags (ex: <em>mood</em>, <em>genre</em>, <em>albummood</em>, <em>albumgrouping</em>, ...)</li>
<li>MusicBrainzID support to handle duplicated artist and release names</li>
<li>ReplayGain support</li>
<li><em>Systemd</em> integration</li>
<li>Subsonic API, with the following additional features:<ul>
<li>Playlists</li>
<li>Starred Album/Artist/Tracks</li>
<li>Bookmarks</li>
</ul>
</li>
</ul>
<h2 id="music-discovery">Music discovery</h2>
<p><em>LMS</em> provides several ways to help you find the music you like:</p>
<ul>
<li>Tag-based filters (ex: <em>Rock</em>, <em>Metal</em> and <em>Aggressive</em>, <em>Electronic</em> and <em>Relaxed</em>, ...)</li>
<li>Recommendations for similar artists and albums</li>
<li>Radio mode, based on what is in the current playqueue</li>
<li>Searches in album, artist and track names (including sort names)</li>
<li>Most played/Recently added music</li>
</ul>
<p>The recommendation engine uses two different sources:</p>
<ol>
<li>Tags that are present in the audio files</li>
<li>Acoustic similarities of the audio files, using a trained <a href="https://en.wikipedia.org/wiki/Self-organizing_map">Self-Organizing Map</a></li>
</ol>
<p><strong>Notes on the self-organizing map</strong>:</p>
<ul>
<li>training the map requires significant computation time on large collections (ex: half an hour for 40k tracks)</li>
<li>audio acoustic data is pulled from <a href="https://acousticbrainz.org/">AcousticBrainz</a>. Therefore your audio files <em>must</em> contain the <a href="https://musicbrainz.org/doc/MusicBrainz_Identifier">MusicBrainz Identifier</a>.</li>
<li>to enable the audio similarity source, you have to enable it first in the settings panel.</li>
</ul>
<h2 id="subsonic-api">Subsonic API</h2>
<p>The API version implemented is 1.12.0 and has been tested on <em>Android</em> using the official application, <em>Ultrasonic</em> and <em>DSub</em>.</p>
<p>Since <em>LMS</em> uses metadata tags to organize music, a compatibility mode is used to navigate through the collection using the directory browsing commands.</p>
<p>The Subsonic API is enabled by default.</p>
<p><strong>Note</strong>: since <em>LMS</em> stores hashed and salted passwords, it cannot handle the <strong>token authentication</strong> method defined from version 1.13.0.</p>
<h2 id="installation">Installation</h2>
<h3 id="docker">Docker</h3>
<p><em>Docker</em> images are available, please see detailed instructions on <a href="https://hub.docker.com/r/epoupon/lms">https://hub.docker.com/r/epoupon/lms</a>.</p>
<h3 id="debian-buster-packages">Debian Buster packages</h3>
<p><em>Buster</em> packages are provided for <em>amd64</em> and <em>armhf</em> architectures.</p>
<p>As root, trust the following debian package provider and add it in your list of repositories:</p>
<pre><code class="language-sh">wget -O - https://debian.poupon.io/apt/debian/epoupon.gpg.key | apt-key add -
echo &quot;deb https://debian.poupon.io/apt/debian buster main&quot; &gt; /etc/apt/sources.list.d/epoupon.list</code></pre>
<p>To install or upgrade <em>LMS</em>:</p>
<pre><code class="language-sh">apt update
apt install lms</code></pre>
<p>The <em>lms</em> service is started just after the package installation, run by a dedicated <em>lms</em> system user.</br>
Please refer to <a href="#deployment">Deployment</a> for further configuration options.</p>
<h3 id="from-source">From source</h3>
<p><strong>Note</strong>: this installation process and the default values of the configuration files have been written for <em>Debian Buster</em>. Therefore, you may have to adapt commands and/or paths in order to fit to your distribution.</p>
<h4 id="build-dependencies">Build dependencies</h4>
<p><strong>Notes</strong>:</p>
<ul>
<li>a C++17 compiler is needed</li>
<li>ffmpeg version 4 minimum is required<pre><code class="language-sh">apt-get install g++ cmake libboost-system-dev libavutil-dev libavformat-dev libgraphicsmagick++1-dev libconfig++-dev libpstreams-dev ffmpeg libtag1-dev</code></pre>
</li>
</ul>
<p>You also need <em>Wt4</em>, which is not packaged yet on <em>Debian</em>. See <a href="https://www.webtoolkit.eu/wt/doc/reference/html/InstallationUnix.html">installation instructions</a>.</br>
No optional requirement is needed, except openSSL if you plan not to deploy behind a reverse proxy (which is not recommended).</p>
<h4 id="build">Build</h4>
<p>Get the latest stable release and build it:</p>
<pre><code class="language-sh">git clone https://github.com/epoupon/lms.git lms
cd lms
mkdir build
cd build
cmake .. -DCMAKE_BUILD_TYPE=Release</code></pre>
<p><strong>Note</strong>: in order to customize the installation directory, you can use the <em>-DCMAKE_INSTALL_PREFIX</em> option (defaults to <code>/usr/local</code>).</p>
<pre><code class="language-sh">make</code></pre>
<p><strong>Note</strong>: you can use <code>make -jN</code> to speed up compilation time (N is the number of compilation workers to spawn).</p>
<h4 id="installation-1">Installation</h4>
<p><strong>Note</strong>: the commands of this section require root privileges.</p>
<pre><code class="language-sh">make install</code></pre>
<p>Create a dedicated system user:</p>
<pre><code class="language-sh">useradd --system --group lms</code></pre>
<p>Copy the configuration files:</p>
<pre><code class="language-sh">cp /usr/share/lms/lms.conf /etc/lms.conf
cp /usr/share/lms/lms.service /lib/systemd/system/lms.service</code></pre>
<p>Create the working directory and give it access to the <em>lms</em> user:</p>
<pre><code class="language-sh">mkdir /var/lms
chown lms:lms /var/lms</code></pre>
<p>To make <em>LMS</em> run automatically during startup:</p>
<pre><code class="language-sh">systemctl enable lms</code></pre>
<h4 id="upgrade">Upgrade</h4>
<p>To upgrade <em>LMS</em> from sources, you need to update the master branch and rebuild/install it:</p>
<pre><code class="language-sh">cd build
git pull
make</code></pre>
<p>Then using root privileges:</p>
<pre><code class="language-sh">make install
systemctl restart lms</code></pre>
<h2 id="deployment">Deployment</h2>
<p><strong>Note</strong>: don&#39;t forget to give the <em>lms</em> user read access to the music directory you want to scan.</p>
<h3 id="configuration">Configuration</h3>
<p><em>LMS</em> uses a configuration file, installed by default in <code>/etc/lms.conf</code>. It is recommended to edit this file and change relevant settings (listen address, listen port, working directory, Subsonic API activation, deployment path, ...).</p>
<p>All other settings are set using the web interface (user management, scan settings, transcode settings, ...).</p>
<p>If a setting is not present in the configuration file, a hardcoded default value is used (the same as in the <a href="https://github.com/epoupon/lms/blob/master/conf/lms.conf">default.conf</a> file)</p>
<h3 id="deploy-on-non-root-path">Deploy on non root path</h3>
<p>If you want to deploy on non root path (e.g. <a href="https://mydomain.com/newroot/">https://mydomain.com/newroot/</a>), you have to set the <code>deploy-path</code> option accordingly in <code>lms.conf</code>.</p>
<p>As static resources are <strong>not</strong> related to the <code>deploy-path</code> option, you have to perform the following steps if you want them to be on a non root path too:</p>
<ul>
<li>Create a new intermediary <code>newroot</code> directory in <code>/usr/share/lms/docroot</code> and move everything in it.</li>
<li>Symlink <code>/usr/share/lms/docroot/newroot/resources</code> to <code>/usr/share/Wt/resources</code>.</li>
<li>Edit <code>lms.conf</code> and set:<pre><code>wt-resources = &quot;&quot; # do not comment the whole line
docroot = &quot;/usr/share/lms/docroot/;/newroot/resources,/newroot/css,/newroot/images,/newroot/js,/newroot/favicon.ico&quot;;`
deploy-path = &quot;/newroot/&quot;; # ending slash is important</code></pre></li>
</ul>
<h3 id="reverse-proxy-settings">Reverse proxy settings</h3>
<p><em>LMS</em> is shipped with an embedded web server, but it is recommended to deploy behind a reverse proxy. You have to set the <em>behind-reverse-proxy</em> option to <em>true</em> in the <code>lms.conf</code> configuration file.</p>
<p>Here is an example to make <em>LMS</em> properly work on <em>myserver.org</em> using <em>nginx</em>:</p>
<pre><code>server {
    listen 80;

    server_name myserver.org;

    access_log            /var/log/nginx/myserver.access.log;

    proxy_request_buffering off;
    proxy_buffering off;
    proxy_buffer_size 4k;

    location / {

      proxy_set_header        Host $host;
      proxy_set_header        X-Real-IP $remote_addr;
      proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header        X-Forwarded-Proto $scheme;

      proxy_pass          http://localhost:5082;
      proxy_read_timeout  120;
    }
}</code></pre><h2 id="run">Run</h2>
<pre><code class="language-sh">systemctl start lms</code></pre>
<p>Log traces can be accessed using journactl:</p>
<pre><code class="language-sh">journalctl -u lms.service</code></pre>
<p>To connect to <em>LMS</em>, just open your favorite browser and go to <a href="http://localhost:5082">http://localhost:5082</a></p>
<h2 id="credits">Credits</h2>
<ul>
<li>Bootstrap Notify: <a href="https://github.com/mouse0270/bootstrap-notify">https://github.com/mouse0270/bootstrap-notify</a></li>
<li>Bootstrap3 (<a href="https://getbootstrap.com/">https://getbootstrap.com/</a>)</li>
<li>Bootswatch (<a href="https://bootswatch.com/">https://bootswatch.com/</a>)</li>
<li>Ffmpeg project (<a href="https://ffmpeg.org/">https://ffmpeg.org/</a>)</li>
<li>GraphicsMagick++ (<a href="http://www.graphicsmagick.org/">http://www.graphicsmagick.org/</a>)</li>
<li>MetaBrainz (<a href="https://metabrainz.org/">https://metabrainz.org/</a>)</li>
<li>Wt (<a href="http://www.webtoolkit.eu/">http://www.webtoolkit.eu/</a>)</li>
</ul>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built On: 02 May 2020</div><div class="column">Version: 1.0.0</div></div></div></footer><script src="/selfhosted-awesome-unlist/site.js"></script></body></html>