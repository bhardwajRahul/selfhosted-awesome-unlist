<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="HawkPost is a web app that lets you create unique links that you can share with a person that desires to send you important information but doesn't know how to encrypt it. The message is encrypted in their browser and sent to your email address."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/selfhosted-awesome-unlist/site.css" rel="stylesheet" type="text/css"></head></head><body><nav class="navigation"><section class="container"><a class="navigation-title" href="/selfhosted-awesome-unlist/">Selfhosted Awesome [Un]list</a></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>hawkpost</h1></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info"><div class="github"><span class="pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>11 Mar 2020</span><span class="stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>806</span><span class="issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>15</span></div><div class="tags"><a class="button" href="/selfhosted-awesome-unlist/tags/communication-systems.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>Communication systems</a><a class="button" href="/selfhosted-awesome-unlist/tags/selfhosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>selfhosted</a><a class="button" href="/selfhosted-awesome-unlist/tags/docker.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>Docker</a></div></div></div></div></div></section><article><div class="container"><div class="row"><div class="column"><h1 id="hawkpost">Hawkpost</h1>
<p>Hawkpost lets you create unique links that you can share with the person that desires to send you important information but doesn&#39;t know how to deal with PGP.</p>
<p>You can deploy your own server using the code from this repository or use the official server (that is running an exact copy of this repo) at <a href="https://hawkpost.co">https://hawkpost.co</a>.</p>
<h2 id="rationale">Rationale</h2>
<p>For many web and mobile development studios, no matter how hard they try to secure their client secrets (passwords, API keys, etc), the weakest link resides on the client most of the times, specially when he&#39;s not a tech savvy person. This project tries to help minimize this issue on the communication between both parties.</p>
<p>The way it works is like this:</p>
<ol>
<li>It fetches your public key.</li>
<li>When the box is open and the secrets submitted, all the content is encrypted on the client side.</li>
<li>The server then signs (<strong>experimental</strong>) the encrypted content.</li>
<li>Finally the server forwards it to your e-mail address.</li>
</ol>
<h1 id="setting-up-a-development-environment">Setting up a development environment</h1>
<p>In this section you can find the steps to setup a minimal development environment on your machine.</p>
<p>Base requirements:</p>
<ul>
<li>Python 3</li>
<li>Redis</li>
<li>PostgreSQL</li>
</ul>
<h2 id="on-linux">On Linux</h2>
<p>On a <strong>Debian</strong> based operating system execute the following steps, after cloning the repository:</p>
<ul>
<li><p>Make sure you have <code>pipenv</code> installed. You can check <a href="https://docs.pipenv.org/install/#installing-pipenv">this page for more information</a></p>
</li>
<li><p>Install the dependencies</p>
</li>
</ul>
<pre><code>$ pipenv install</code></pre><ul>
<li><p>Create the local postgreSQL database with your user and no password</p>
</li>
<li><p>Migrate the database</p>
</li>
</ul>
<pre><code>$ pipenv run python manage.py migrate</code></pre><ul>
<li>Generate stylesheet with gulp (installation instructions for gulp can be found <a href="https://gulpjs.com/">here</a>)</li>
</ul>
<pre><code>$ gulp build</code></pre><ul>
<li>Now you should be able to launch the server and its workers</li>
</ul>
<pre><code>$ pipenv run python manage.py runserver
$ pipenv run celery -A hawkpost worker --beat -l info</code></pre><p>You can avoid <code>pipenv run</code> in every command if you first active the virtual environment with <code>pipenv shell</code>.</p>
<h2 id="using-docker">Using Docker</h2>
<p>To use this approach you need to have <a href="https://www.docker.com/products/docker-engine">Docker</a> and
<a href="https://www.docker.com/products/docker-compose">Docker Compose</a> installed.
Please note that since <strong>this project uses version 2 of the
<a href="https://docs.docker.com/compose/compose-file/#versioning">Compose file format</a></strong> you may need
to update your Docker and Docker Compose to their latest versions.</p>
<p>Installation instructions for every platform are available at the
<a href="https://docs.docker.com/engine/installation">Docker Engine Documentation</a>. If you use Linux you&#39;ll
have to <a href="https://github.com/docker/compose/releases">install Docker Compose</a> manually.</p>
<p>After having the latest Docker and Docker Compose installed, <strong>make the
folder</strong> that will hold the <strong>GPG public keys keyring</strong>:</p>
<pre><code>$ mkdir -p gpg_home</code></pre><p>Some environment variables need to be set so the application works properly.
<strong>Copy</strong> the provided <strong><a href=".env.sample">.env.sample</a></strong> and name it <strong><code>.env</code></strong>:</p>
<pre><code>$ cp .env.sample .env</code></pre><p>Since this setup assumes containers talk to each other some of the variables
need to be set in order to point to the containers&#39; names.</p>
<p><strong>Edit <code>.env</code></strong> and set the following variables to these values:</p>
<pre><code>DB_HOST=db
DB_USER=hawkpost
DB_PASSWORD=hawkpost
REDIS_URL=redis://redis:6379/0
EMAIL_HOST=mail_debug</code></pre><p><strong>Don&#39;t forget to set the remaining variables</strong> as well.</p>
<p>After setting <code>.env</code> correctly, just <strong>run</strong> (you may need to <code>sudo</code> depending
on your setup)</p>
<pre><code class="language-bash"># Run the databases in detached mode to avoid seeing the logs
$ docker-compose up -d db redis

# Perform the migrations
# (using `--rm` to remove the temporary container afterwards)
$ docker-compose run --rm web pipenv run python manage.py migrate

# Run the web, celery and mail_debug containers
# (`docker-compose up` would log db and redis as well)
$ docker-compose up web celery mail_debug</code></pre>
<p>These commands</p>
<ol>
<li><strong>Run the <code>db</code> and the <code>redis</code> containers</strong> detached from the console, so
we&#39;re not bothered by their logs while working on the application.</li>
<li><strong>Perform the migrations</strong> using a temporary <code>web</code> container; it is removed
afterwards.</li>
<li><strong>Run the <code>web</code>, <code>celery</code> and <code>mail_debug</code> containers</strong> attached to the
console. <code>mail_debug</code> is optional since it is only used when debugging the
e-mails being sent.</li>
</ol>
<p>The <code>web</code> container will reload on code changes.</p>
<p>You may access the application by <strong>opening <code>http://&lt;docker-network-ip&gt;</code> on
your browser</strong>, which you can find by <strong>running</strong> (you may need to run this as
<code>root</code> depending on your setup).</p>
<pre><code>CID=$(docker ps | grep &#39;hawkpost_web&#39; | cut -d &#39; &#39; -f 1)
docker inspect -f &quot;{{ .NetworkSettings.Networks.hawkpost_default.Gateway }}&quot; $CID</code></pre><p>This IP won&#39;t change unless you remove every container and the corresponding
network (manually), so you may alias it on your <code>/etc/hosts</code> (to something like
<code>hawkpost.test</code>).</p>
<p><strong>Note:</strong> This approach was not tested on OS X or Windows platforms, so the
network feature may require additional steps.</p>
<h1 id="running-the-test-suite">Running the test suite</h1>
<p>To execute our current test suite, you just need to execute the following command after settinng up your local development environment:</p>
<blockquote>
<p>$ pipenv run python manage.py test</p>
</blockquote>
<p>In case you are using our docker setup the command should be:</p>
<blockquote>
<p>$ docker-compose run --rm web pipenv run python manage.py test</p>
</blockquote>
<h1 id="credits">Credits</h1>
<p><img src="http://i.imgur.com/Si2l3kd.png" alt="Whitesmith"></p>
<p>This project was born during an internal hackathon at <a href="https://whitesmith.co">Whitesmith</a>, which is helping and supporting the current development.</p>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built On: 02 May 2020</div><div class="column">Version: 1.1.0</div></div></div></footer><script src="/selfhosted-awesome-unlist/site.js"></script></body></html>